/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[16],{425:function(ia,ea,e){function da(e,f,h){f.endsWith("/")||(f+="/");h=h||{};var n=h.disableWebsockets||!1;this.jX=h.singleServerMode||!1;null!=h.customQueryParameters&&Object(y.b)("wvsQueryParameters",h.customQueryParameters);f.endsWith("blackbox/")||(f+="blackbox/");this.Mn=h.uploadData||null;this.Gx=h.uriData||null;this.AP=h.cacheKey||null;this.oU=h.officeOptions||null;this.Wu=Object(r.a)(f,null,n);this.lf=f;this.FG=e;this.Bf=
null;this.$j=ha();this.Im=ha();this.iA=!1;this.vg=this.Zd=this.re=this.jf=null;this.Ff=[];this.XA=[];this.cache={};this.timeStamp=0;this.cg=[];this.Bh=[];this.fH=null;this.yG=!1;this.JK=this.id=null;this.iJ=this.GS=ca;this.eD=0;this.jI=!1;this.jU=1;this.Ci={};this.$q=0;this.Ls=fa();this.oq(!0)}function fa(){var e={$r:{},Jb:[],pop:function(){var f=e.Jb.pop();e.$r[f.key]=void 0;return f},push:function(f,h){h={key:f,data:h};e.Jb.push(h);e.$r[f]=h.data},contains:function(f){return!!e.$r[f]},get:function(f){return e.$r[f]},
set:function(f,h){e.$r[f]=h;e.Jb.forEach(function(h,n){h.key==f&&(e.Jb[n]=h)})},remove:function(f){e.$r[f]=void 0;e.Jb.forEach(function(h,n){h.key==f&&e.Jb.splice(n,1)})},length:function(){return e.Jb.length}};return e}function ha(){var e={promise:null,resolve:null,reject:null,state:0,result:null,request:null,os:function(){return 1===(e.state&1)},qba:function(){return 2===(e.state&2)},xi:function(){return!e.qba()&&!e.os()},Saa:function(){return 4===(e.state&4)},BW:function(){e.state|=4}};e.promise=
new Promise(function(f,h){e.resolve=function(){if(0===e.state||4===e.state)e.state=1,e.result=arguments[0],f.apply(null,arguments)};e.reject=function(){if(0===e.state||4===e.state)e.state=2,h.apply(null,arguments)}});return e}function ca(){return!1}function ba(e,f,h){if(!(f in oa))return!0;f=oa[f];for(var n=0;n<f.length;n++){var r=e;var w=f[n];var x=h;if(w.name in r){var y="",z=!1;r=r[w.name];switch(w.type){case "s":y="String";z=Object(aa.isString)(r);break;case "a":y="Array";z=Object(aa.isArray)(r);
break;case "n":y="Number";z=Object(aa.isNumber)(r)&&Object(aa.isFinite)(r);break;case "o":y="Object",z=Object(aa.isObject)(r)&&!Object(aa.isArray)(r)}z||x.reject('Expected response field "'+w.name+'" to have type '+y);w=z}else x.reject('Response missing field "'+w.name+'"'),w=!1;if(!w)return!1}return!0}e.r(ea);var aa=e(0);e.n(aa);var w=e(2);ia=e(50);var z=e(31),r=e(443),h=e(89),n=e(359),f=e(112),y=e(39),x=e(162),oa={pages:[{name:"pages",type:"a"}],pdf:[{name:"url",type:"s"}],docmod:[{name:"url",type:"s"},
{name:"rID",type:"s"}],health:[],tiles:[{name:"z",type:"n"},{name:"rID",type:"n"},{name:"tiles",type:"a"},{name:"size",type:"n"}],annots:[{name:"url",type:"s"},{name:"name",type:"s"}],image:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],text:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],ApString2Xod:[{name:"url",type:"s"},{name:"rID",type:"s"}]};da.prototype=Object(aa.extend)(da.prototype,{d5:function(){var e=this;return new Promise(function(f,h){var n=new XMLHttpRequest;
n.open("GET",e.lf+"ck");n.withCredentials=e.gl();n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&(200===n.status?f():h())};n.send()})},$ga:function(e,f){this.GS=e||ca;this.iJ=f||ca},QP:function(){var e=this;this.Im=ha();this.$j=ha();return this.Wu.WG().then(function(){e.iA=!1;e.id=null;e.yG=!1;return e.d5()})},uK:function(){this.GS();this.CI();this.jf&&(this.jf.xi()?this.Ug(this.jf.request):this.jf.os()&&this.iJ(this.jf.result.url,"pdf")&&(this.jf=null,this.ZV()));this.vg&&this.vg.xi()&&
this.Ug(this.vg.request);this.re&&this.re.xi()?this.Ug(this.re.request):this.Zd&&this.Zd.xi()&&this.vS(this.Zd.request);var e;for(e=0;e<this.cg.length;e++)this.cg[e]&&this.cg[e]&&(this.cg[e].xi()?this.Ug(this.cg[e].request):this.cg[e].os()&&this.iJ(this.cg[e].result.url,"image")&&(this.cg[e]=null,this.bD(Object(aa.uniqueId)(),e)));for(e=0;e<this.Bh.length;e++)this.Bh[e]&&this.Bh[e]&&this.Bh[e].xi()&&!this.Bh[e].Saa()&&this.Ug(this.Bh[e].request);for(e=0;e<this.Ff.length;e++)this.Ff[e]&&this.Ff[e].xi()&&
this.Ug(this.Ff[e].request)},CI:function(e){var h=this;this.iA||(this.timeStamp=Date.now(),this.Wu.sL(function(e){h.Gca(e)},function(){return null},function(){return null},!0).then(function(){clearInterval(h.UC);h.UC=null},function(n){h.iA=!1;if(!h.UC){var r=0;h.yG=!0;h.JK=0;h.UC=setInterval(function(){2>r++?h.uK():(clearInterval(h.UC),e&&e.reject(f.a),Object(w.g)("WebViewerServer connection failed:"+n))},5E3)}}),this.iA=!0)},sja:function(){var e=this,f=createPromiseCapability();if(this.Mn){var h=
new FormData;h.append("file",this.Mn.fileHandle,this.Mn.fileHandle.name);var n=this.Mn.loadCallback;var r="upload";var w=this.Mn.extension}else if(this.Gx){h={uri:this.Gx.uri,sna:this.Gx.shareId};h=Object.keys(h).map(function(e){return e+"="+(h[e]?encodeURIComponent(h[e]):"")}).join("&");var y="application/x-www-form-urlencoded; charset=UTF-8";n=this.Gx.loadCallback;r="url";w=this.Gx.extension}else return Promise.resolve();var aa=new XMLHttpRequest,ba=Object(z.j)(e.lf,"AuxUpload");ba=Object(x.a)(ba)+
"&type="+r+"&ext="+w;aa.open("POST",ba);aa.withCredentials=this.gl();y&&aa.setRequestHeader("Content-Type",y);aa.addEventListener("load",function(){if(aa.readyState===aa.DONE&&200===aa.status){var h=JSON.parse(aa.response);e.FG=h.uri;n(h);f.resolve(h)}});aa.addEventListener("error",function(){f.reject(aa.statusText+" "+JSON.stringify(aa))});this.Mn&&null!=this.Mn.onProgress&&(aa.upload.onprogress=function(f){e.Mn.onProgress(f)});aa.send(h);return f.promise},xfa:function(e){this.password=e||null;this.$j.os()||
(this.$j=ha(),this.Ug({t:"pages"}));return this.$j.promise},Tw:function(e){this.fH=e||null;this.$j.os()||(this.CI(this.$j),this.Ug({t:"pages"}));return this.$j.promise},Vu:function(e){e=Object.assign(e,{uri:encodeURIComponent(this.FG)});this.fH&&(e.ext=this.fH);this.Bf&&(e.c=this.Bf);this.password&&(e.pswd=this.password);this.AP&&(e.cacheKey=this.AP);this.oU&&(e.officeOptions=this.oU);return e},aga:function(){0<this.Ls.length()&&10>=this.$q&&this.bga(this.Ls.pop().data)},p3:function(e){return 0<this.Ls.length()&&
this.Ls.contains(e)?(this.Ls.remove(e),!0):!1},Ug:function(e){e=this.Vu(e);this.Wu.send(e)},oW:function(e,f){10<this.$q?this.Ls.push(e,f):(this.$q++,e=this.Vu(f),this.Wu.send(e))},bga:function(e){this.$q++;e=this.Vu(e);this.Wu.send(e)},Qk:function(e){return e},Gca:function(e){var f=this,n=e.data,r=e.err,z=e.t;switch(z){case "upload":r?f.tja.reject(r):f.tja.resolve("Success");break;case "pages":r?f.$j.reject(r):ba(n,z,f.$j)&&f.$j.resolve(n);break;case "config":if(r)f.Im.reject(r);else if(ba(n,z,f.Im)){n.id&&
(f.id=n.id);if(n.auth){var aa=Object(y.a)("wvsQueryParameters");aa.auth=n.auth;Object(y.b)("wvsQueryParameters",aa)}n.serverVersion&&(f.pY=n.serverVersion,Object(w.h)("[WebViewer Server] server version: "+f.pY));n.serverID?(f.eD=n.serverID===f.JK&&f.jI?f.eD+1:0,f.JK=n.serverID):f.eD=0;f.jI=!1;f.Im.resolve(n)}break;case "health":r?f.Im.reject(r):ba(n,z,f.Im)&&(n=n.unhealthy,f.jX&&n?Object(w.j)("Server failed health check. Single server mode ignoring check."):!f.Jla&&n&&1>=f.eD&&(f.jI=!0,f.QP().then(function(){f.uK()},
function(){f.uK()})));break;case "pdf":n.url=Object(x.a)(f.lf+"../"+encodeURI(n.url));r?f.jf.reject(r):ba(n,z,f.jf)&&f.jf.resolve(n);break;case "ApString2Xod":n.url=Object(x.a)(f.lf+"../data/"+encodeURI(n.url));r?f.Ci[n.rID].reject(r):ba(n,z,f.Ci[n.rID])&&f.Ci[n.rID].resolve(n);break;case "docmod":n.url=Object(x.a)(f.lf+"../"+encodeURI(n.url));r?f.Ci[n.rID].reject(r):ba(n,z,f.jf)&&f.Ci[n.rID].resolve(n);break;case "xod":if(r)this.re&&this.re.xi()&&this.re.reject(r),this.Zd&&this.Zd.xi()&&this.Zd.reject(r);
else if(n.notFound)n.noCreate||this.re&&this.re.xi()&&this.re.resolve(n),this.Zd&&this.Zd.xi()&&this.Zd.resolve(n);else{n.url&&(n.url=Object(x.a)(f.lf+"../"+encodeURI(n.url)));if(!this.Zd||this.Zd.os())this.Zd=ha(),this.Zd.request={t:"xod",noCreate:!0};this.re||(this.re=ha(),this.re.request={t:"xod"});this.Zd.resolve(n);this.re.resolve(n)}break;case "annots":if(r)f.vg.reject(r);else if(ba(n,z,f.vg)){f.vg.BW();var ca=new XMLHttpRequest;aa=f.lf+"../"+encodeURI(n.url);var da=n.hasAppearance?Object(x.a)(aa+
".xodapp"):null;ca.open("GET",Object(x.a)(aa));ca.responseType="text";ca.withCredentials=this.gl();ca.addEventListener("load",function(){ca.readyState===ca.DONE&&200===ca.status&&f.vg.resolve({PL:ca.response,Lz:da})});ca.addEventListener("error",function(){f.vg.reject(ca.statusText+" "+JSON.stringify(ca))});ca.send()}break;case "image":f.$q--;var fa=this.cg[n.p];r?fa.promise.reject(r):ba(n,z,fa)&&(fa.result=n,fa.result.url=Object(x.a)(f.lf+"../"+encodeURI(fa.result.url)),fa.resolve(fa.result));break;
case "tiles":f.$q--;fa=n.rID;aa=this.Ff[fa];this.Ff[fa]=null;this.XA.push(fa);if(r)aa.reject(r);else if(ba(n,z,aa)){for(r=0;r<n.tiles.length;r++)n.tiles[r]=Object(x.a)(f.lf+"../"+encodeURI(n.tiles[r]));aa.resolve(n)}break;case "text":fa=this.Bh[n.p];if(r)fa.reject(r);else if(ba(n,z,fa)){fa.BW();var ea=new XMLHttpRequest;n=Object(x.a)(f.lf+"../"+encodeURI(n.url));ea.open("GET",n);ea.withCredentials=this.gl();ea.addEventListener("load",function(){ea.readyState===ea.DONE&&200===ea.status&&(fa.result=
JSON.parse(ea.response),fa.resolve(fa.result))});ea.addEventListener("error",function(e){fa.reject(ea.statusText+" "+JSON.stringify(e))});ea.send()}break;case "progress":"loading"===n.t&&f.trigger(h.a.Events.DOCUMENT_LOADING_PROGRESS,[n.bytes,n.total])}this.aga();!z&&e.echo&&e&&"apstring2xod"==e.echo.t&&(e=e.echo.reqID)&&(2<=parseInt(f.pY)?f.Ci[e].reject("Message unhandled by server"):f.Ci[e].reject())},yR:function(){this.CI(this.Im);return this.Im.promise},I8:function(e){for(var f=this,h=new XMLHttpRequest,
n=Object(x.a)(this.lf+"aul")+"&id="+this.id,r=new FormData,w={},y=0;y<e.body.length;y++){var z=e.body[y];w[z.id]=z.QF.w+";"+z.QF.h;r.append(z.id,z.QF.dataString)}e={t:"apstring2xod",reqID:this.jU++,parts:w};var aa=this.Vu(e);r.append("msg",JSON.stringify(aa));f.Ci[aa.reqID]=ha();h.open("POST",n);h.withCredentials=f.gl;n=new Promise(function(e,f){h.onreadystatechange=function(){4===h.readyState&&(200===h.status?e():f("An error occurred while sending down appearance strings to the server"))}});h.send(r);
return n.then(function(){return f.Ci[aa.reqID].promise})},H8:function(){this.vg||(this.vg=ha(),this.vg.request={t:"annots"},this.Ug(this.vg.request));return this.vg.promise},bD:function(e,f){this.cg[f]||(this.cg[f]=ha(),this.cg[f].request={t:"image",p:f},this.oW(e,this.cg[f].request));return this.cg[f].promise},yfa:function(e){this.Bh[e]||(this.Bh[e]=ha(),this.Bh[e].request={t:"text",p:e},this.Ug(this.Bh[e].request));return this.Bh[e].promise},zfa:function(e,f,h,n,r){var w=this.Ff.length;this.XA.length&&
(w=this.XA.pop());this.Ff[w]=ha();this.Ff[w].request={t:"tiles",p:f,z:h,r:n,size:r,rID:w};this.oW(e,this.Ff[w].request);return this.Ff[w].promise},ZV:function(){this.jf||(this.jf=ha(),this.jf.request={t:"pdf"},this.yG?this.jf.resolve({url:this.FG}):this.Ug(this.jf.request));return this.jf.promise},VR:function(e){var f=this,h=new XMLHttpRequest,n=Object(x.a)(this.lf+"aul")+"&id="+this.id,r=new FormData,w={};e.annots&&(w.annots="xfdf");e.watermark&&(w.watermark="png");e.redactions&&(w.redactions="redact");
w={t:"docmod",reqID:this.jU++,parts:w};e.print&&(w.print=!0);var y=this.Vu(w);r.append("msg",JSON.stringify(y));return Promise.all([e.annots,e.watermark,e.redactions].map(function(e){return Promise.resolve(e)})).then(function(e){var w=e[0],x=e[1],z=e[2];w&&r.append("annots",w);x&&r.append("watermark",e.watermark);z&&r.append("redactions",z);f.Ci[y.reqID]=ha();h.open("POST",n);h.withCredentials=f.gl;e=new Promise(function(e,f){h.onreadystatechange=function(){4===h.readyState&&(200===h.status?e():f("An error occurred while sending down annotation data to the server"))}});
h.send(r);return e.then(function(){return f.Ci[y.reqID].promise})})},vS:function(){this.Zd||(this.Zd=ha(),this.Zd.request={t:"xod",noCreate:!0},this.Ug(this.Zd.request));return this.Zd.promise},Afa:function(){this.re||(this.re=ha(),this.re.request={t:"xod"},this.Ug(this.re.request));return this.re.promise},yn:function(){return!0},request:function(){},wV:function(){},abort:function(){for(var e=0;e<this.Ff.length;e++)this.Ff[e]&&(this.Ff[e].resolve(null),this.Ff[e]=null,this.XA.push(e));this.close()},
qD:function(e){this.Bf=this.Bf||{};this.Bf.headers=e},hma:function(){return this.Bf?Object(aa.omit)(this.Bf.headers,["Cookie","cookie"]):null},oq:function(e){this.Bf=this.Bf||{};this.Bf.internal=this.Bf.internal||{};this.Bf.internal.withCredentials=e},gl:function(){return this.Bf&&this.Bf.internal?this.Bf.internal.withCredentials:null},getFileData:function(){return Promise.reject()}});Object(ia.a)(da);Object(n.a)(da);Object(n.b)(da);ea["default"]=da},443:function(ia,ea,e){function da(e,w,z){function r(e,
f){function h(e){r().then(function(f){ea&&!ia?setTimeout(function(){h(e)},1):f.send(JSON.stringify(e))})}function n(e,f,n,r){var x=window.createPromiseCapability(),y=!1,ja=x;aa=e;da=f;fa=n;z=null;r&&(e=Object(ca.a)("wvsQueryParameters"),e.bcid=Object(ha.k)(8),Object(ca.b)("wvsQueryParameters",e));try{e=Ga?ka+"/"+Ga:ka+"/ws";e=Object(ba.a)(e);var ma=new WebSocket(e);ma.onopen=function(){x.resolve();y=!0;x=null;ea=!1;w.resolve(ma);da&&da()};ma.onerror=function(e){ea=ia=!0;x&&x.reject(e);z&&z.reject()};
ma.onclose=function(){w=window.createPromiseCapability();ea=!0;z||(z=window.createPromiseCapability());z.resolve();fa&&fa();aa&&y&&aa({t:"health",data:{unhealthy:!0,isDead:!0}})};ma.onmessage=function(e){e&&e.data&&(e=JSON.parse(e.data),e.hb?h({hb:!0}):e.end?close():aa(e))}}catch(Ea){x.reject(Ea),x=null}return ja.promise}function r(){ea&&aa&&n(aa);return w.promise}var w=window.createPromiseCapability(),z=null,aa,da,fa=null,ea=!1,ia=!1,Ga=f,ka=function(e){var f=e.indexOf("://"),h="ws://";0>f?f=0:(5===
f&&(h="wss://"),f+=3);var n=e.lastIndexOf("/");0>n&&(n=e.length);return h+e.slice(f,n)}(e);return{send:h,sL:n,WG:function(){return z?z.promise:r().then(function(e){z=window.createPromiseCapability();aa=null;e.close();return z.promise})}}}function h(e){var f=e.lastIndexOf("/");0>f&&(f=e.length);return e.slice(0,f)}return window.WebSocket&&!z?r(e,w):function(e,f){function n(e){(ea?ea.promise:Promise.resolve(da)).then(function(f){var h=new XMLHttpRequest,n=ca?aa+"/"+ca+"pf":aa+"/pf";n=Object(ba.a)(n)+
"&id="+f;f=new FormData;f.append("data",JSON.stringify(e));h.open("POST",n);h.withCredentials=!0;h.send(f)})}function r(){da=0;ea||(ea=window.createPromiseCapability())}function w(){z=new XMLHttpRequest;var e=aa+"/pf";e+=0!==da?"?id="+da+"&uc="+ka:"?uc="+ka;ka++;z.open("GET",e,!0);z.withCredentials=!0;z.setRequestHeader("Cache-Control","no-cache");z.setRequestHeader("X-Requested-With","XMLHttpRequest");var f=z,h=!1;z.onreadystatechange=function(){a:if(3<=f.readyState&&!h){try{var e=f.responseText.length}catch(Aa){Object(fa.h)("caught exception");
break a}if(0<e)try{var x=f.responseText.split("\n");for(x[x.length-1]&&x.pop();0<x.length&&3>x[x.length-1].length;)"]"===x.pop()&&r();0<x.length&&3>x[0].length&&x.shift();for(e=0;e<x.length;++e)x[e].endsWith(",")&&(x[e]=x[e].substr(0,x[e].length-1));0===da&&0<x.length&&(da=JSON.parse(x.shift()).id,e=ea,ea=null,e.resolve(da));var y;for(e=0;e<x.length;++e)(y=JSON.parse(x[e]))&&y.end?close():y&&y.hb&&y.id===da?n({hb:!0}):Ga(y)}catch(Aa){}ha||(h=!0,w())}};z.send()}var z,aa=h(e),ca=f,da=0,ea=window.createPromiseCapability(),
ha=!1,ia=null,Ga=null,ka=0;return{send:n,sL:function(e,f,h){Ga=e;ia=h;ha=!1;r();w();f&&f();return Promise.resolve()},WG:function(){r();Ga=null;ha=!0;ia&&ia();z.abort();return Promise.resolve()}}}(e,w)}e.d(ea,"a",function(){return da});var fa=e(2),ha=e(31),ca=e(39),ba=e(162)}}]);}).call(this || window)
